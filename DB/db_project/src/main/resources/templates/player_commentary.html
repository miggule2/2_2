<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title th:text="${player.name} + ' ì„ ìˆ˜ ì½”ë©˜í„°ë¦¬'">ì„ ìˆ˜ëª… ì½”ë©˜í„°ë¦¬</title>
  <style>
    .official-comment { background-color: #e6f7ff; border-left: 5px solid #007bff; padding: 15px; margin-bottom: 15px; border-radius: 5px; }
    .general-comment { background-color: #f8f8f8; padding: 15px; margin-bottom: 15px; border-radius: 5px; }
    .player-img { width: 100px; height: 100px; object-fit: cover; border-radius: 50%; margin-right: 20px;}
    .official-mark { color: #007bff; font-weight: bold; }
  </style>
</head>
<body>

<div class="player-info">
  <img th:src="@{'/resources/' + ${player.imageUrl}}" alt="ì„ ìˆ˜ ì´ë¯¸ì§€" class="player-img" onerror="this.src='/resources/default.jpg'"/>
  <div>
    <h1 th:text="${player.name} + ' ì„ ìˆ˜'">ì„ ìˆ˜ëª…</h1>
    <p><strong>ì†Œì† íŒ€:</strong> <span th:text="${player.team.teamName}">íŒ€ëª…</span> |
      <strong>í¬ì§€ì…˜:</strong> <span th:text="${player.position}">í¬ì§€ì…˜</span> |
      <strong>ê°€ìƒ ê°€ê²©:</strong> <span th:text="${player.salary} + 'ì–µ ì›'">ê°€ê²©</span></p>
  </div>
</div>

<hr/>

<div th:if="${isPlayerAccountOwner}">
  <h2>ğŸ“ ê³µì‹ ì½”ë©˜í„°ë¦¬ ì‘ì„±</h2>
  <form th:action="@{/commentaries}" method="post">
    <input type="hidden" name="playerId" th:value="${player.playerId}"/>
    <textarea name="comment" rows="3" cols="60" placeholder="ì„ ìˆ˜ ë³¸ì¸ì˜ ì†Œê°ì„ ë‚¨ê²¨ì£¼ì„¸ìš”." required></textarea><br/>
    <button type="submit" style="background-color: #007bff; color: white; padding: 8px 15px; border: none; border-radius: 4px; margin-top: 5px;">
      â­ ê³µì‹ ì½”ë©˜í„°ë¦¬ ë“±ë¡
    </button>
  </form>
  <hr/>
</div>

<h2>ğŸ’¬ ëª¨ë“  ì½”ë©˜í„°ë¦¬</h2>
<div th:each="comment : ${commentaries}">
  <div th:class="${comment.official} ? 'official-comment' : 'general-comment'">

    <div class="comment-header">
      <span th:if="${comment.official}" class="official-mark">âœ… ê³µì‹ ê³„ì •</span>
      <span th:text="${comment.userName}">ì‘ì„±ì</span>
    </div>

    <p th:text="${comment.comment}" style="margin-top: 5px;"></p>
    <small>ì‘ì„± ì‹œê°„: <span th:text="${comment.createdTime}"></span></small>

    <span th:if="${currentUserId != null and comment.authorId == currentUserId}">
                <form th:action="@{/commentaries/delete}" method="post" style="display: inline; margin-left: 10px;">
                    <input type="hidden" name="commentId" th:value="${comment.commentId}"/>
                    <button type="submit" style="color: red; background: none; border: none; cursor: pointer;">[ì‚­ì œ]</button>
                </form>
            </span>
  </div>
</div>

<div th:if="${commentaries.isEmpty()}">
  <p>ë“±ë¡ëœ ì½”ë©˜í„°ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
</div>

</body>
</html>